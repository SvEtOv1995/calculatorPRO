<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ì–µ–æ–º–µ—Ç—Ä–∏–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        .calculator, .canvas-container {
            margin: 20px;
            padding: 20px;
            border: 2px solid #000;
            border-radius: 10px;
            background: #f9f9f9;
        }
        .canvas-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        canvas {
            border: 1px solid black;
            cursor: crosshair;
        }
        input, select, button {
            margin: 5px;
            padding: 8px;
        }
    </style>
</head>
<body>
    <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ì–µ–æ–º–µ—Ç—Ä–∏–∏</h1>
    
    <div class="container">
        <div class="calculator">
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–≥—É—Ä—É</h2>
            <select id="shape" onchange="showForm()">
                <option value="triangle">–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫</option>
                <option value="rectangle">–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫</option>
                <option value="square">–ö–≤–∞–¥—Ä–∞—Ç</option>
                <option value="circle">–ö—Ä—É–≥</option>
            </select>
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ –≤—ã—á–∏—Å–ª–∏—Ç—å</h2>
            <select id="calculationType" onchange="toggleCalculationFields()">
                <option value="none">–ù–∏—á–µ–≥–æ (–ø—Ä–æ—Å—Ç–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å)</option>
                <option value="area">–ü–ª–æ—â–∞–¥—å</option>
                <option value="perimeter">–ü–µ—Ä–∏–º–µ—Ç—Ä</option>
                <option value="side">–°—Ç–æ—Ä–æ–Ω–∞</option>
                <option value="angle">–£–≥–æ–ª</option>
                <option value="height">–í—ã—Å–æ—Ç–∞</option>
                <option value="bisector">–ë–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞</option>
                <option value="median">–ú–µ–¥–∏–∞–Ω–∞</option>
                <option value="diameter">–î–∏–∞–º–µ—Ç—Ä</option>
            </select>

            <div id="form-container"></div>

            <button onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç: <span id="result">-</span></h3>
        </div>

        <div class="canvas-container">
            <h2>–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ</h2>
            <canvas id="canvas" width="300" height="300"></canvas>
        </div>
    </div>

    <script>
        function showForm() {
            const shape = document.getElementById("shape").value;
            const calculationType = document.getElementById("calculationType").value;
            let formHtml = "";
        
            if (shape === "triangle") {
                formHtml = `
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ a: <input type="number" id="a" value="100" oninput="drawShape(); calculate();"></label><br>
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ b: <input type="number" id="b" value="80" oninput="drawShape(); calculate();"></label><br>
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ c: <input type="number" id="c" value="60" oninput="drawShape(); calculate();"></label><br>
                    <label>–£–≥–æ–ª Œ±: <input type="number" id="angleA" value="60" oninput="drawShape(); calculate();"></label><br>
                `;
            } else if (shape === "rectangle" || shape === "parallelogram") {
                formHtml = `
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ a: <input type="number" id="a" value="120" oninput="drawShape(); calculate();"></label><br>
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ b: <input type="number" id="b" value="60" oninput="drawShape(); calculate();"></label><br>
                `;
            } else if (shape === "square" || shape === "rhombus") {
                formHtml = `
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ a: <input type="number" id="a" value="100" oninput="drawShape(); calculate();"></label><br>
                `;
            } else if (shape === "trapezoid") {
                formHtml = `
                    <label>–û—Å–Ω–æ–≤–∞–Ω–∏–µ a: <input type="number" id="a" value="120" oninput="drawShape(); calculate();"></label><br>
                    <label>–û—Å–Ω–æ–≤–∞–Ω–∏–µ b: <input type="number" id="b" value="80" oninput="drawShape(); calculate();"></label><br>
                    <label>–í—ã—Å–æ—Ç–∞ h: <input type="number" id="h" value="60" oninput="drawShape(); calculate();"></label><br>
                `;
            }
        
            document.getElementById("form-container").innerHTML = formHtml;
            drawShape();
        }        
        
        
        function updateDiameter() {
            const r = parseFloat(document.getElementById("r").value);
            document.getElementById("d").value = (2 * r).toFixed(2);
        }

        
        function calculate() {
            const shape = document.getElementById("shape").value;
            const calculationType = document.getElementById("calculationType").value;
            let result = "";
        
            if (calculationType === "area") {
                if (shape === "triangle") {
                    const a = parseFloat(document.getElementById("a").value);
                    const h = parseFloat(document.getElementById("h").value);
                    result = `–ü–ª–æ—â–∞–¥—å: ${(0.5 * a * h).toFixed(2)}`;
                } else if (shape === "rectangle" || shape === "parallelogram") {
                    const a = parseFloat(document.getElementById("a").value);
                    const b = parseFloat(document.getElementById("b").value);
                    result = `–ü–ª–æ—â–∞–¥—å: ${a * b}`;
                } else if (shape === "square" || shape === "rhombus") {
                    const a = parseFloat(document.getElementById("a").value);
                    result = `–ü–ª–æ—â–∞–¥—å: ${a * a}`;
                } else if (shape === "trapezoid") {
                    const a = parseFloat(document.getElementById("a").value);
                    const b = parseFloat(document.getElementById("b").value);
                    const h = parseFloat(document.getElementById("h").value);
                    result = `–ü–ª–æ—â–∞–¥—å: ${((a + b) / 2 * h).toFixed(2)}`;
                }
            } 
            else if (calculationType === "perimeter") {
                if (shape === "triangle") {
                    const a = parseFloat(document.getElementById("a").value);
                    const b = parseFloat(document.getElementById("b").value);
                    const c = parseFloat(document.getElementById("c").value);
                    result = `–ü–µ—Ä–∏–º–µ—Ç—Ä: ${a + b + c}`;
                } else if (shape === "rectangle" || shape === "parallelogram") {
                    const a = parseFloat(document.getElementById("a").value);
                    const b = parseFloat(document.getElementById("b").value);
                    result = `–ü–µ—Ä–∏–º–µ—Ç—Ä: ${2 * (a + b)}`;
                } else if (shape === "square" || shape === "rhombus") {
                    const a = parseFloat(document.getElementById("a").value);
                    result = `–ü–µ—Ä–∏–º–µ—Ç—Ä: ${4 * a}`;
                } else if (shape === "trapezoid") {
                    const a = parseFloat(document.getElementById("a").value);
                    const b = parseFloat(document.getElementById("b").value);
                    const c = parseFloat(document.getElementById("c").value);
                    const d = parseFloat(document.getElementById("d").value);
                    result = `–ü–µ—Ä–∏–º–µ—Ç—Ä: ${a + b + c + d}`;
                }
            }
            
            document.getElementById("result").innerText = result;
            drawShape();
        }
        
        
        
        function drawShape() {
            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = "black";
            ctx.lineWidth = 2;
            ctx.font = "14px Arial";
        
            const shape = document.getElementById("shape").value;
        
            if (shape === "triangle") {
                ctx.beginPath();
                ctx.moveTo(100, 200);
                ctx.lineTo(200, 200);
                ctx.lineTo(150, 100);
                ctx.closePath();
                ctx.stroke();
        
                ctx.fillText("A", 95, 205);
                ctx.fillText("B", 205, 205);
                ctx.fillText("C", 145, 95);
            } 
            else if (shape === "rectangle" || shape === "parallelogram") {
                ctx.strokeRect(100, 100, 120, 60);
        
                ctx.fillText("A", 95, 105);
                ctx.fillText("B", 225, 105);
                ctx.fillText("C", 225, 165);
                ctx.fillText("D", 95, 165);
            } 
            else if (shape === "square" || shape === "rhombus") {
                ctx.strokeRect(120, 120, 100, 100);
        
                ctx.fillText("A", 115, 125);
                ctx.fillText("B", 225, 125);
                ctx.fillText("C", 225, 225);
                ctx.fillText("D", 115, 225);
            } 
            else if (shape === "trapezoid") {
                ctx.beginPath();
                ctx.moveTo(100, 200);
                ctx.lineTo(220, 200);
                ctx.lineTo(180, 150);
                ctx.lineTo(140, 150);
                ctx.closePath();
                ctx.stroke();
        
                ctx.fillText("A", 95, 205);
                ctx.fillText("B", 225, 205);
                ctx.fillText("C", 185, 145);
                ctx.fillText("D", 135, 145);
            }
        }       
             
        
        function toggleCalculationFields() {
            const calculationType = document.getElementById("calculationType").value;
            const formContainer = document.getElementById("form-container");
        
            if (calculationType === "none") {
                formContainer.innerHTML = "";  
            } else {
                showForm();
            }
        }
        

        function showForm() {
            const shape = document.getElementById("shape").value;
            const calculationType = document.getElementById("calculationType").value;
            let formHtml = "";
        
            if (shape === "triangle") {
                formHtml = `
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ a: <input type="number" id="a" value="100" oninput="drawShape()"></label><br>
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ b: <input type="number" id="b" value="80" oninput="drawShape()"></label><br>
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ c: <input type="number" id="c" value="60" oninput="drawShape()"></label><br>
                    <label>–£–≥–æ–ª Œ≥: <input type="number" id="angle" value="60" oninput="drawShape()"></label><br>
                    <label>–í—ã—Å–æ—Ç–∞ h: <input type="number" id="h" readonly></label><br>
                `;
            } else if (shape === "rectangle") {
                formHtml = `
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ a: <input type="number" id="a" value="120" oninput="drawShape()"></label><br>
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ b: <input type="number" id="b" value="60" oninput="drawShape()"></label><br>
                `;
            } else if (shape === "square") {
                formHtml = `
                    <label>–°—Ç–æ—Ä–æ–Ω–∞ a: <input type="number" id="a" value="100" oninput="drawShape()"></label><br>
                `;
            } else if (shape === "circle") {
                formHtml = `
                    <label>–†–∞–¥–∏—É—Å r: <input type="number" id="r" value="50" oninput="updateDiameter(); drawShape();"></label><br>
                    <label>–î–∏–∞–º–µ—Ç—Ä d: <input type="number" id="d" value="100" readonly></label><br>
                `;
            }
        
            document.getElementById("form-container").innerHTML = formHtml;
            drawShape();
        }


        window.onload = showForm;
    </script>

    <p><a href="{% url 'index' %}">üîô –ù–∞ –≥–ª–∞–≤–Ω—É—é</a></p>
</body>
</html>
